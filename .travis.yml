language: python
python:
  - 3.8

# Update pip to the latest version
before_install:
  - python --version
  - pip install -U pip

install:
  - pip install -r requirements.txt

script:
  - python -m unittest tests/razor_tests.py

deploy:
  provider: pypi
  username: "__token__"
  password: "pypi-AgEIcHlwaS5vcmcCJDc5YTcxOTE0LWI3NzctNGMzZS1iZGU0LWRlODAxMjcxYjViNgACOXsicGVybWlzc2lvbnMiOiB7InByb2plY3RzIjogWyJtbC1yYXpvciJdfSwgInZlcnNpb24iOiAxfQACOXsicHJvamVjdF9pZHMiOiBbIjE0ZjUyYTU1LTliM2YtNDBhMC1iY2M1LWFiN2ZlMmMyMmQ0NyJdfQAABiAholFeOBuYOsrw1sByw8LFiP-xf-dgj8TuNfukHyFG0w"
  on:
    branch: master